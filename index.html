<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Rangos e Interés Compuesto</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Calculadora de Rangos e Interés Compuesto</h1>
        <p>El interés compuesto es como sembrar semillas: plantas hoy y cada día tu cosecha crece más, permitiéndote sembrar aún más semillas y obtener una cosecha cada vez mayor con el tiempo.</p>
        
        <form id="calculatorForm" onsubmit="return calcular(event)">
            <label for="rangoActual">Selecciona tu Rango Actual:</label>
            <select id="rangoActual" required onchange="actualizarCapital()">
                <option value="20">Rango 20 - $10,000</option>
                <option value="19">Rango 19 - $9,000</option>
                <option value="18">Rango 18 - $8,000</option>
                <option value="17">Rango 17 - $7,000</option>
                <option value="16">Rango 16 - $6,000</option>
                <option value="15">Rango 15 - $5,000</option>
                <option value="14">Rango 14 - $4,500</option>
                <option value="13">Rango 13 - $4,000</option>
                <option value="12">Rango 12 - $3,500</option>
                <option value="11">Rango 11 - $3,000</option>
                <option value="10">Rango 10 - $2,500</option>
                <option value="9">Rango 9 - $2,000</option>
                <option value="8">Rango 8 - $1,500</option>
                <option value="7">Rango 7 - $1,000</option>
                <option value="6">Rango 6 - $500</option>
                <option value="5">Rango 5 - $400</option>
                <option value="4">Rango 4 - $300</option>
                <option value="3">Rango 3 - $200</option>
                <option value="2">Rango 2 - $100</option>
                <option value="1">Rango 1 - $50</option>
            </select>
            
            <label for="cicloMeses">Ciclo de Inversión (Meses):</label>
            <input type="number" id="cicloMeses" value="12" required min="1">

            <!-- Hidden input for initial capital -->
            <input type="hidden" id="capitalInicial" value="10000">
            
            <button type="submit">Calcular</button>
        </form>
    </div>

    <!-- Pop-up de Resultados -->
    <div class="popup" id="popup" style="display:none;">
        <div class="popup-content">
            <h2>Resultados del Cálculo</h2>
            <table id="resultadosTabla">
                <thead>
                    <tr>
                        <th>Descripción</th>
                        <th>Valor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Rango Final Alcanzado</td>
                        <td id="resultadoRango"></td>
                    </tr>
                    <tr>
                        <td>Capital Final</td>
                        <td id="resultadoCapitalFinal"></td>
                    </tr>
                    <tr>
                        <td>Ganancias por Invitaciones (Generación 1)</td>
                        <td id="ganancias1G"></td>
                    </tr>
                    <tr>
                        <td>Ganancias por Invitaciones (Generación 2)</td>
                        <td id="ganancias2G"></td>
                    </tr>
                    <tr>
                        <td>Ganancia Bruta Total</td>
                        <td id="mensajeCapital"></td>
                    </tr>
                    <tr>
                        <td>Estrategia para Alcanzar $1,000,000</td>
                        <td id="mensajeEstrategia"></td>
                    </tr>
                </tbody>
            </table>
            <button onclick="cerrarPopup()">Cerrar</button>
        </div>
    </div>

    <script>
        // Mapeo de Capital por Rango desde 1 hasta 20
        const capitalPorRango = {
            1: 50,
            2: 100,
            3: 200,
            4: 300,
            5: 400,
            6: 500,
            7: 1000,
            8: 1500,
            9: 2000,
            10: 2500,
            11: 3000,
            12: 3500,
            13: 4000,
            14: 4500,
            15: 5000,
            16: 6000,
            17: 7000,
            18: 8000,
            19: 9000,
            20: 10000
        };

        // Función para actualizar el capital inicial según el rango seleccionado
        function actualizarCapital() {
            const rangoActual = parseInt(document.getElementById('rangoActual').value);
            const capitalInicial = capitalPorRango[rangoActual];
            document.getElementById('capitalInicial').value = capitalInicial;
        }

        // Función principal de cálculo
        function calcular(event) {
            event.preventDefault();

            const rangoActual = parseInt(document.getElementById('rangoActual').value);
            let capital = capitalPorRango[rangoActual];
            const cicloMeses = parseInt(document.getElementById('cicloMeses').value);
            const interesMensual = 0.10; // 10% de interés mensual
            let siguienteRango = rangoActual;

            let totalGananciaInteres = 0;
            let gananciaBruta = 0;
            let ganancias1G = 0;
            let ganancias2G = 0;
            let gananciaInvitados2G = 0;
            let capitalFaltante = 1000000 - capital;

            for (let mes = 1; mes <= cicloMeses; mes++) {
                // Cálculo del interés compuesto mensual sobre el capital inicial
                const gananciaInteres = capital * interesMensual;
                gananciaBruta += gananciaInteres;
                totalGananciaInteres += gananciaInteres;

                // Revisión para subir de rango
                while (siguienteRango < 20 && capital + gananciaInteres >= capitalPorRango[siguienteRango + 1]) {
                    siguienteRango++;
                }

                // Acumular el interés ganado
                capital += gananciaInteres;

                // Ganancias por invitado de 2 rangos inferiores
                if (siguienteRango > 2) {
                    const rangoInvitado = siguienteRango - 2;
                    const gananciaInvitado = capitalPorRango[rangoInvitado] * interesMensual;
                    const comisionInvitado = gananciaInvitado * 0.12; // 12% de la ganancia del invitado
                    ganancias1G += comisionInvitado;
                    capital += comisionInvitado;

                    // Generar ganancia para la segunda generación
                    const comision2G = gananciaInvitado * 0.005; // 0.5% de las ganancias de segunda generación
                    ganancias2G += comision2G;
                    gananciaInvitados2G += comision2G;
                }

                // Calcular cuánto falta para llegar a $1,000,000
                capitalFaltante = 1000000 - capital;
            }

            // Estrategia recomendada para alcanzar $1,000,000
            const estrategia = capitalFaltante > 0 ? `Necesitas continuar invirtiendo para alcanzar $1,000,000. Podrías considerar aumentar tu inversión mensual o incrementar la cantidad de invitados.` : `¡Felicidades! Has alcanzado el capital de $1,000,000.`;

            // Mostrar resultados en el Pop-up
            document.getElementById('resultadoRango').textContent = siguienteRango;
            document.getElementById('resultadoCapitalFinal').textContent = `$${capital.toFixed(2)}`;
            document.getElementById('gananciaTotalInvitados').textContent = `$${(ganancias1G + ganancias2G).toFixed(2)}`;
            document.getElementById('mensajeCapital').textContent = `Ganancia bruta total: $${gananciaBruta.toFixed(2)}. Faltan $${capitalFaltante.toFixed(2)} para alcanzar $1,000,000.`;
            document.getElementById('mensajeEstrategia').textContent = estrategia;

            // Detalles de Generación 1 y Generación 2
            document.getElementById('ganancias1G').textContent = `Ganancias Generación 1: $${ganancias1G.toFixed(2)}`;
            document.getElementById('ganancias2G').textContent = `Ganancias Generación 2: $${gananciaInvitados2G.toFixed(2)}`;

            document.getElementById('popup').style.display = 'flex';
        }

        // Función para cerrar el Pop-up
        function cerrarPopup() {
            document.getElementById('popup').style.display = 'none';
        }
    </script>
</body>
</html>
